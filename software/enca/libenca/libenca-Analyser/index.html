<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app23.us.archive.org';v.server_ms=672;archive_analytics.send_pageview({});});</script><script type="text/javascript" src="/_static/js/playback.bundle.js?v=VsAvnOBw" charset="utf-8"></script>
<script type="text/javascript" src="/_static/js/wombat.js?v=cRqOKCOw" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("http://trific.ath.cx:80/software/enca/libenca/libenca-Analyser/","20070526084919","http://trific.ath.cx/CSS/colors-yeti.css"/>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII"/>
<title>Analyser</title>

<link rel="home" href="../" title="Enca Library Reference Manual"/>
<link rel="up" href="../ch01/" title="Enca Library API"/>
<link rel="previous" href="../ch01/" title="Enca Library API"/>
<link rel="next" href="http://trific.ath.cx/software/enca/libenca/libenca-Typedefs-and-Constants/" title="Typedefs and Constants"/>

<style type="text/css"><!--
.synopsis { background: #dedede; border: solid 1px black; padding: 0.5em; }
.variablelist { padding: 4px; margin-left: 3em; }
.programlisting { background: #d7e3d4; padding: 1em; }
.navigation, .navigation a { background: #1c701c; color: white; }
.navigation a:hover, .navigation a:active { background: white; color: #1c701c; } h1, h2, h3 { font-family: sans-serif; }
.title { font-size: large; }
--></style>
<link rel="chapter" href="../ch01/" title="Enca Library API"/>
</head>
<body><!-- END WAYBACK TOOLBAR INSERT -->
<table class="navigation" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="http://trific.ath.cx/software/enca/libenca/ch01/">Prev</a></td>
<td><a accesskey="u" href="http://trific.ath.cx/software/enca/libenca/ch01/">Up</a></td>
<td><a accesskey="h" href="http://trific.ath.cx/software/enca/libenca/">Home</a></td>
<th width="100%" align="center">Enca Library Reference Manual</th>
<td><a accesskey="n" href="http://trific.ath.cx/software/enca/libenca/libenca-Typedefs-and-Constants/">Next</a></td>
</tr>
</table>

<div class="refentry" lang="en" id="libenca-Analyser">
<div class="refnamediv">
<table width="100%">
<tr>
<td valign="top">
<h2><span class="refentrytitle">Analyser</span></h2>

Analyser &mdash; Basic analyser interface.
</td>
<td valign="top" align="right"></td>
</tr>
</table>
</div>

<div class="refsynopsisdiv">
<h2>Synopsis</h2>

<pre class="synopsis">


EncaAnalyser <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyser-alloc">enca_analyser_alloc</a>            (const char *langname);
void        <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyser-free">enca_analyser_free</a>              (EncaAnalyser analyser);
<a href="http://trific.ath.cx/software/enca/libenca/libenca-Typedefs-and-Constants/#EncaEncoding">EncaEncoding</a> <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse">enca_analyse</a>                   (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);
<a href="http://trific.ath.cx/software/enca/libenca/libenca-Typedefs-and-Constants/#EncaEncoding">EncaEncoding</a> <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse-const">enca_analyse_const</a>             (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);
int         <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-errno">enca_errno</a>                      (EncaAnalyser analyser);
const char* <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-strerror">enca_strerror</a>                   (EncaAnalyser analyser,
                                             int errnum);
int         <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-double-utf8-check">enca_double_utf8_check</a>          (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);
int*        <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-double-utf8-get-candidates">enca_double_utf8_get_candidates</a> (EncaAnalyser analyser);
void        <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-multibyte">enca_set_multibyte</a>              (EncaAnalyser analyser,
                                             int multibyte);
int         <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-get-multibyte">enca_get_multibyte</a>              (EncaAnalyser analyser);
void        <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-interpreted-surfaces">enca_set_interpreted_surfaces</a>   (EncaAnalyser analyser,
                                             int interpreted_surfaces);
int         <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-get-interpreted-surfaces">enca_get_interpreted_surfaces</a>   (EncaAnalyser analyser);
void        <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-ambiguity">enca_set_ambiguity</a>              (EncaAnalyser analyser,
                                             int ambiguity);
int         <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-get-ambiguity">enca_get_ambiguity</a>              (EncaAnalyser analyser);
void        <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-filtering">enca_set_filtering</a>              (EncaAnalyser analyser,
                                             int filtering);
int         <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-get-filtering">enca_get_filtering</a>              (EncaAnalyser analyser);
void        <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-garbage-test">enca_set_garbage_test</a>           (EncaAnalyser analyser,
                                             int garabage_test);
int         <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-get-garbage-test">enca_get_garbage_test</a>           (EncaAnalyser analyser);
void        <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-termination-strictness">enca_set_termination_strictness</a> (EncaAnalyser analyser,
                                             int termination_strictness);
int         <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-get-termination-strictness">enca_get_termination_strictness</a> (EncaAnalyser analyser);
int         <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-significant">enca_set_significant</a>            (EncaAnalyser analyser,
                                             size_t significant);
size_t      <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-get-significant">enca_get_significant</a>            (EncaAnalyser analyser);
int         <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-threshold">enca_set_threshold</a>              (EncaAnalyser analyser,
                                             double threshold);
double      <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-get-threshold">enca_get_threshold</a>              (EncaAnalyser analyser);
</pre>
</div>

<div class="refsect1" lang="en" id="id2849786">
<h2>Description</h2>

<p>Basically you want to allocate an analyser with <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyser-alloc"><tt class="function">enca_analyser_alloc()</tt></a> for some language,
use <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse"><tt class="function">enca_analyse()</tt></a> (or <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse-const"><tt class="function">enca_analyse_const()</tt></a>) on a buffer to find
its encoding, and interpret the results with something like <a href="http://trific.ath.cx/software/enca/libenca/libenca-Charsets-and-Surfaces/#enca-charset-name"><tt class="function">enca_charset_name()</tt></a>. The analyser then
can be used for another buffer. Once you no longer need it, call <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyser-free"><tt class="function">enca_analyser_free()</tt></a> to release it.</p>

<p>A single working example is better than a hundred pages of
reference manual.</p>

<div class="example" id="id2849835">
<p class="title"><b>Example&nbsp;1.&nbsp;A minimal Enca library
application &ndash; Czech encoding detector.</b></p>

<pre class="programlisting">
<span class="type">include</span> &lt;stdio.h&gt;
<span class="type">include</span> &lt;enca.h&gt;

int
main(void)
{
  EncaAnalyser analyser;
  EncaEncoding encoding;
  unsigned char buffer[4096];
  size_t buflen;

  buflen = fread(buffer, 1, 4096, stdin);
  analyser = enca_analyser_alloc("cs");
  encoding = enca_analyse(analyser, buffer, buflen);
  printf("Charset: %<tt class="literal">s</tt>\n", enca_charset_name(encoding.charset,
                                             ENCA_NAME_STYLE_HUMAN));
  enca_analyser_free(analyser);

  return 0;
}
</pre>
</div>

<p>The analyser has plenty of options, but generally you don't need
to fiddle with them, except <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-termination-strictness"><tt class="function">enca_set_termination_strictness()</tt></a>.</p>

<p>All names prefixed with <tt class="function">ENCA_</tt>, <tt class="function">Enca</tt>, <tt class="function">_Enca</tt>, or <tt class="function">enca_</tt> should be treated as reserved and not
used for application function/variable/type/macro names.</p>
</div>

<div class="refsect1" lang="en" id="id2849899">
<h2>Details</h2>

<div class="refsect2" lang="en" id="id2849904">
<h3 id="enca-analyser-alloc">enca_analyser_alloc ()</h3>


<pre class="programlisting">
EncaAnalyser enca_analyser_alloc            (const char *langname);
</pre>

<p>Allocates an analyser and initializes it for language <i class="parameter"><tt>language</tt></i>.</p>

<p>The analyser, once crerated, can be used only for language for
which it was initialized. If you need to detect encodings of texts
in more than one language, you must allocate an analyser for each
one. Note however, an analyser may occupy a considerable amount of
memory (a few hundreds of kB), so it's generally not a good idea to
have several hundreds of them floating around.</p>

<p><i class="parameter"><tt>langname</tt></i> is two-letter ISO
639:1989 language code. Locale names in form language_territory and
ISO-639 English language names also may be accepted in the future.
To be on the safe side, use only names returned by <a href="http://trific.ath.cx/software/enca/libenca/libenca-Auxiliary-Functions/#enca-get-languages"><tt class="function">enca_get_languages()</tt></a>.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>langname</tt></i></span></td>
<td>Language for which the analyser should be initialized.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>The newly created <span class="type">EncaAnalyser</span> on
success, <a href="http://trific.ath.cx/software/enca/libenca/usr/share/gtk-doc/html/glib/glib-Standard-Macros/#NULL:CAPS">
<span class="type">NULL</span></a> on failure (namely when <i class="parameter"><tt>langname</tt></i> is unknown or otherwise
invalid).</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2769107">
<h3 id="enca-analyser-free">enca_analyser_free ()</h3>


<pre class="programlisting">
void        enca_analyser_free              (EncaAnalyser analyser);
</pre>

<p>Frees memory used by <span class="type">EncaAnalyser</span> <i class="parameter"><tt>analyser</tt></i>.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser to be destroyed.</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2769161">
<h3 id="enca-analyse">enca_analyse
()</h3>


<pre class="programlisting">
<a href="http://trific.ath.cx/software/enca/libenca/libenca-Typedefs-and-Constants/#EncaEncoding">EncaEncoding</a> enca_analyse                   (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);
</pre>

<p>Analyses <i class="parameter"><tt>buffer</tt></i> and finds its
encoding.</p>

<p>The <i class="parameter"><tt>buffer</tt></i> is checked for 8bit
encodings of language for which <i class="parameter"><tt>analyser</tt></i> was initialized and for
multibyte encodings, mostly independent on language (unless
disabled with <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-multibyte"><tt class="function">enca_set_multibyte()</tt></a>).</p>

<p>The contents of <i class="parameter"><tt>buffer</tt></i> may be
(and probably will be) modified during the analyse. Use <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse-const"><tt class="function">enca_analyse_const()</tt></a> instead if this
discomforts you.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser initialized for some language.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>buffer</tt></i></span></td>
<td>Buffer to be analysed.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>size</tt></i></span></td>
<td>Size of <i class="parameter"><tt>buffer</tt></i>.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Encoding of <i class="parameter"><tt>buffer</tt></i>. When
charset part of return value is <a href="http://trific.ath.cx/software/enca/libenca/libenca-Typedefs-and-Constants/#ENCA-CS-UNKNOWN:CAPS"><span class="type">ENCA_CS_UNKNOWN</span></a>, encoding was not
determined. Check <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-errno"><tt class="function">enca_errno()</tt></a> for reason.</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2882555">
<h3 id="enca-analyse-const">enca_analyse_const ()</h3>


<pre class="programlisting">
<a href="http://trific.ath.cx/software/enca/libenca/libenca-Typedefs-and-Constants/#EncaEncoding">EncaEncoding</a> enca_analyse_const             (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);
</pre>

<p>Analyses <i class="parameter"><tt>buffer</tt></i> and finds its
encoding.</p>

<p>The <i class="parameter"><tt>buffer</tt></i> is checked for 8bit
encodings of language for which <i class="parameter"><tt>analyser</tt></i> was initialized and for
multibyte encodings, mostly independent on language (unless
disabled with <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-multibyte"><tt class="function">enca_set_multibyte()</tt></a>).</p>

<p>This function never modifies <i class="parameter"><tt>buffer</tt></i> (can be even used with string
literal <i class="parameter"><tt>buffer</tt></i>) at the expense
it's generally slower than <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse"><tt class="function">enca_analyse()</tt></a>.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser initialized for some language.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>buffer</tt></i></span></td>
<td>Buffer to be analysed.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>size</tt></i></span></td>
<td>Size of <i class="parameter"><tt>buffer</tt></i>.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Encoding of <i class="parameter"><tt>buffer</tt></i>. When
charset part of return value is <a href="http://trific.ath.cx/software/enca/libenca/libenca-Typedefs-and-Constants/#ENCA-CS-UNKNOWN:CAPS"><span class="type">ENCA_CS_UNKNOWN</span></a>, encoding was not
determined. Check <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-errno"><tt class="function">enca_errno()</tt></a> for reason.</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2882704">
<h3 id="enca-errno">enca_errno ()</h3>


<pre class="programlisting">
int         enca_errno                      (EncaAnalyser analyser);
</pre>

<p>Returns analyser error code.</p>

<p>The error code is not modified. However, any other analyser call
i.e. call to a function taking <i class="parameter"><tt>analyser</tt></i> as parameter can change the
error code.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Error code of reason why last analyser call failed.</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2882769">
<h3 id="enca-strerror">enca_strerror
()</h3>


<pre class="programlisting">
const char* enca_strerror                   (EncaAnalyser analyser,
                                             int errnum);
</pre>

<p>Returns string describing the error code.</p>

<p>The returned string must be considered constant and must NOT be
freed. It is however gauranteed not to be modified on invalidated
by subsequent calls to any libenca functions, including <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-strerror"><tt class="function">enca_strerror()</tt></a>.</p>

<p>The analyser error code is not changed for a successful call,
and it set to <span class="type">ENCA_EINVALUE</span> upon
error.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>errnum</tt></i></span></td>
<td>An analyser error code.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>String describing the error code.</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2882866">
<h3 id="enca-double-utf8-check">enca_double_utf8_check ()</h3>


<pre class="programlisting">
int         enca_double_utf8_check          (EncaAnalyser analyser,
                                             unsigned char *buffer,
                                             size_t size);
</pre>

<p>Checks buffer for double-UTF-8 encoding.</p>

<p>Double-UTF-8 encoding is the result of [errorneous] conversion
of UTF-8 text to UTF-8 again, as if it was in some 8bit charset.
This is quite hard to recover from.</p>

<p>The analayser mostly only determines what language will be
assumed, the rest of this test is independent on the main guessing
routines. When <i class="parameter"><tt>buffer</tt></i> doesn't
containing UTF-8 text, the result is undefined (namely, false
positives are possible).</p>

<p>Calling this function when language is `none' has currently no
effect.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>Analyzer state determinig the language for double-UTF-8
check.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>buffer</tt></i></span></td>
<td>The buffer to be checked [<i class="parameter"><tt>size</tt></i>].</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>size</tt></i></span></td>
<td>The size of <i class="parameter"><tt>buffer</tt></i>.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Nonzero, when <i class="parameter"><tt>buffer</tt></i> probably
contains doubly-UTF-8 encoded text. More precisely, it returns the
number of charsets which are possible candidates for source
charset. You can then use <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-double-utf8-get-candidates"><tt class="function">enca_double_utf8_get_candidates()</tt></a> to
retrieve the charsets.</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883000">
<h3 id="enca-double-utf8-get-candidates">enca_double_utf8_get_candidates
()</h3>


<pre class="programlisting">
int*        enca_double_utf8_get_candidates (EncaAnalyser analyser);
</pre>

<p>Returns array of double-UTF-8 source charset candidates from the
last check.</p>

<p>The returned array should be freed by caller then no longer
needed. Its is the return value of the preceding <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-double-utf8-check"><tt class="function">enca_double_utf8_check()</tt></a> call.</p>

<p>When called before any double-UTF-8 test has been performed yet
or after and unsuccessfull double-UTF-8 test, it returns NULL, but
the result after an unsuccessfull check should be considered
undefined.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>Analyzer state for which double-UTF-8 candidates are to be
returned.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>An array containing charset id's of possible source charsets
from which the sample was doubly-UTF-8 encoded. The array may
contain only one value, but usually enca is not able to decide
between e.g. ISO-8859-2 and Win1250, thus more candidates are
returned.</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883085">
<h3 id="enca-set-multibyte">enca_set_multibyte ()</h3>


<pre class="programlisting">
void        enca_set_multibyte              (EncaAnalyser analyser,
                                             int multibyte);
</pre>

<p>Enables or disables multibyte encoding tests for <i class="parameter"><tt>analyser</tt></i>.</p>

<p>This option is enabled by default.</p>

<p>When multibyte encodings are disabled, only 8bit charsets are
checked. Disabling them for language with no 8bit charsets leaves
only one thing <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse"><tt class="function">enca_analyse()</tt></a> could test: whether the
sample is purely 7bit ASCII or not (the latter leading to analyser
failure, of course).</p>

<p>Multibyte encoding detection is also affected by <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-termination-strictness"><tt class="function">enca_set_termination_strictness()</tt></a>.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>multibyte</tt></i></span></td>
<td>Whether multibyte encoding tests should be enabled (nonzero to
enable, zero to disable).</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883183">
<h3 id="enca-get-multibyte">enca_get_multibyte ()</h3>


<pre class="programlisting">
int         enca_get_multibyte              (EncaAnalyser analyser);
</pre>

<p>Returns whether <i class="parameter"><tt>analyser</tt></i> can
return multibyte encodings.</p>

<p>See <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-multibyte"><tt class="function">enca_set_multibyte()</tt></a> for more detailed
description of multibyte encoding checking.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Nonzero when multibyte encoding are possible, zero
otherwise.</td>
</tr>
</tbody>
</table>
</div>

<p>Since 1.3.</p>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883259">
<h3 id="enca-set-interpreted-surfaces">enca_set_interpreted_surfaces
()</h3>


<pre class="programlisting">
void        enca_set_interpreted_surfaces   (EncaAnalyser analyser,
                                             int interpreted_surfaces);
</pre>

<p>Enables or disables interpeted surfaces tests for <i class="parameter"><tt>analyser</tt></i>.</p>

<p>This option is enabled by default.</p>

<p>To allow simple applications which care about charset only and
don't want to wrestle with surfaces, neglecting surface information
should not have serious consequences. While ignoring EOL type
surface is feasible, and ignoring UCS byteorders may be acceptable
in endian-homogenous environment; ignoring the fact file is
Quoted-Printable encoded can have disasterous consequences. By
disabling this option you can disable surfaces requiring
fundamental reinterpretation of the content, namely <tt class="literal">ENCA_SURFACE_QP</tt> and <tt class="literal">ENCA_SURFACE_EOL_BIN</tt> (thus probably making <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse"><tt class="function">enca_analyse()</tt></a> to fail on such
samples).</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>interpreted_surfaces</tt></i></span></td>
<td>Whether interpreted surfaces tests should be enabled (nonzero
to allow, zero to disallow).</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2844868">
<h3 id="enca-get-interpreted-surfaces">enca_get_interpreted_surfaces
()</h3>


<pre class="programlisting">
int         enca_get_interpreted_surfaces   (EncaAnalyser analyser);
</pre>

<p>Returns whether <i class="parameter"><tt>analyser</tt></i>
allows interpreted surfaces.</p>

<p>See <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-interpreted-surfaces"><tt class="function">enca_set_interpreted_surfaces()</tt></a> for more
detailed description of interpreted surfaces.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Nonzero when interpreted surfaces are possible, zero
otherwise.</td>
</tr>
</tbody>
</table>
</div>

<p>Since 1.3.</p>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2860861">
<h3 id="enca-set-ambiguity">enca_set_ambiguity ()</h3>


<pre class="programlisting">
void        enca_set_ambiguity              (EncaAnalyser analyser,
                                             int ambiguity);
</pre>

<p>Enables or disables ambiguous mode for <i class="parameter"><tt>analyser</tt></i>.</p>

<p>This option is disabled by default.</p>

<p>In ambiguous mode some result is returned even when the charset
cannot be determined uniquely, provided that sample contains only
characters which have the same meaning in all charsets under
consideration.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>ambiguity</tt></i></span></td>
<td>Whether result can be ambiguous (nonzero to allow, zero to
disallow).</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883377">
<h3 id="enca-get-ambiguity">enca_get_ambiguity ()</h3>


<pre class="programlisting">
int         enca_get_ambiguity              (EncaAnalyser analyser);
</pre>

<p>Returns whether <i class="parameter"><tt>analyser</tt></i> can
return ambiguous results.</p>

<p>See <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-ambiguity"><tt class="function">enca_set_ambiguity()</tt></a> for more detailed
description of ambiguous results.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Nonzero when ambiguous results are allowed, zero
otherwise.</td>
</tr>
</tbody>
</table>
</div>

<p>Since 1.3.</p>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883445">
<h3 id="enca-set-filtering">enca_set_filtering ()</h3>


<pre class="programlisting">
void        enca_set_filtering              (EncaAnalyser analyser,
                                             int filtering);
</pre>

<p>Enables or disables filters for <i class="parameter"><tt>analyser</tt></i>.</p>

<p>This option is enabled by default.</p>

<p>Various filters are used to filter out block of binary noise and
box-drawing characters that could otherwise confuse enca. In cases
this is unwanted, you can disable them by setting this option to
zero.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>filtering</tt></i></span></td>
<td>Whether filters should be enabled (nonzero to enable, zero to
disable).</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883522">
<h3 id="enca-get-filtering">enca_get_filtering ()</h3>


<pre class="programlisting">
int         enca_get_filtering              (EncaAnalyser analyser);
</pre>

<p>Returns whether <i class="parameter"><tt>analyser</tt></i> has
filtering enabled.</p>

<p>See <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-filtering"><tt class="function">enca_set_filtering()</tt></a> for more detailed
description of filtering.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Nonzero when filtering is enabled, zero otherwise.</td>
</tr>
</tbody>
</table>
</div>

<p>Since 1.3.</p>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883596">
<h3 id="enca-set-garbage-test">enca_set_garbage_test ()</h3>


<pre class="programlisting">
void        enca_set_garbage_test           (EncaAnalyser analyser,
                                             int garabage_test);
</pre>

<p>Enables or disables garbage test for <i class="parameter"><tt>analyser</tt></i>.</p>

<p>This option is enabled by default.</p>

<p>To prevent white noise (and almost-white noise) from being
accidentally detected as some charset, a garbage test is used. In
cases this is unwanted, you can disable is by setting this option
to zero.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>garabage_test</tt></i></span></td>
<td>Whether garbage test should be allowed (nonzero to enable,
nzero to disable).</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883673">
<h3 id="enca-get-garbage-test">enca_get_garbage_test ()</h3>


<pre class="programlisting">
int         enca_get_garbage_test           (EncaAnalyser analyser);
</pre>

<p>Returns whether <i class="parameter"><tt>analyser</tt></i> has
garbage test enabled.</p>

<p>See <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-garbage-test"><tt class="function">enca_set_garbage_test()</tt></a> for more detailed
description of garbage test.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Nonzero when garbage test is enabled, zero otherwise.</td>
</tr>
</tbody>
</table>
</div>

<p>Since 1.3.</p>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883747">
<h3 id="enca-set-termination-strictness">enca_set_termination_strictness
()</h3>


<pre class="programlisting">
void        enca_set_termination_strictness (EncaAnalyser analyser,
                                             int termination_strictness);
</pre>

<p>Enables or disables requiring multibyte sequences to be
terminated correctly at the end of sample.</p>

<p>This option is enabled by default.</p>

<p>The sample given to <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse"><tt class="function">enca_analyse()</tt></a> generally may not be a
complete text (e.g. for efficiency reasons). As a result, it may
end in the middle of a multibyte sequence. In this case, you should
disable this option to prevent rejecting some charset just because
the sample don't terminate correctly. On the other hand, when given
sample contains whole text, you should always enable this option to
assure correctness of the result.</p>

<p>Note this option does NOT affect fixed character size encodings,
like UCS-2 and UCS-4; sample is never assumed to contain UCS-2 text
when its size is not even (and similarly for UCS-4).</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>termination_strictness</tt></i></span></td>
<td>Whether multibyte sequences are required to be terminated
correctly at the end of sample (nonzero to require, zero to
relax).</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883840">
<h3 id="enca-get-termination-strictness">enca_get_termination_strictness
()</h3>


<pre class="programlisting">
int         enca_get_termination_strictness (EncaAnalyser analyser);
</pre>

<p>Returns whether <i class="parameter"><tt>analyser</tt></i>
requires strict termination.</p>

<p>See <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-termination-strictness"><tt class="function">enca_set_termination_strictness()</tt></a> for
more detailed description of termination strictness.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Nonzero when strict termination is required, zero
otherwise.</td>
</tr>
</tbody>
</table>
</div>

<p>Since 1.3.</p>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2883914">
<h3 id="enca-set-significant">enca_set_significant ()</h3>


<pre class="programlisting">
int         enca_set_significant            (EncaAnalyser analyser,
                                             size_t significant);
</pre>

<p>Sets the minimal number of required significant characters.</p>

<p>The default value of this option is 10.</p>

<p><a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse"><tt class="function">enca_analyse()</tt></a> refuses to make a decision
unles at least this number of significant characters is found in
sample. You may want to lower this number for very short texts.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>significant</tt></i></span></td>
<td>Minimal number of required significant characters.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Zero on success, nonzero on failure, i.e. when you passed zero
as <i class="parameter"><tt>significant</tt></i>. It sets analyser
errno to ENCA_EINVALUE on failure.</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2884010">
<h3 id="enca-get-significant">enca_get_significant ()</h3>


<pre class="programlisting">
size_t      enca_get_significant            (EncaAnalyser analyser);
</pre>

<p>Returns the minimum number of significant characters required by
<i class="parameter"><tt>analyser</tt></i>.</p>

<p>See <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-significant"><tt class="function">enca_set_significant()</tt></a> for more detailed
description of required significant characters.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>The minimum number of significant characters.</td>
</tr>
</tbody>
</table>
</div>

<p>Since 1.3.</p>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2884085">
<h3 id="enca-set-threshold">enca_set_threshold ()</h3>


<pre class="programlisting">
int         enca_set_threshold              (EncaAnalyser analyser,
                                             double threshold);
</pre>

<p>Sets the minimal ratio between the most probable and the second
most probable charsets.</p>

<p>The default value of this option is 1.4142.</p>

<p><a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-analyse"><tt class="function">enca_analyse()</tt></a> consideres the result
known only when there's a clear gap between the most probable and
the second most probable charset proababilities. Lower <i class="parameter"><tt>threshold</tt></i> values mean larger
probability of a mistake and smaller probability of not recognizing
a charset; higher <i class="parameter"><tt>threshold</tt></i>
values the contrary. Threshold value of 2 is almost infinity.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><i class="parameter"><tt>threshold</tt></i></span></td>
<td>Minimal ratio between winner and second best guess.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>Zero on success, nonzero on failure, i.e. when you passed value
smaller than 1.0 as <i class="parameter"><tt>threshold</tt></i>. It
sets analyser errno to ENCA_EINVALUE on failure.</td>
</tr>
</tbody>
</table>
</div>
</div>

<hr/>
<div class="refsect2" lang="en" id="id2884191">
<h3 id="enca-get-threshold">enca_get_threshold ()</h3>


<pre class="programlisting">
double      enca_get_threshold              (EncaAnalyser analyser);
</pre>

<p>Returns the threshold value used by <i class="parameter"><tt>analyser</tt></i>.</p>

<p>See <a href="http://trific.ath.cx/software/enca/libenca/libenca-Analyser/#enca-set-threshold"><tt class="function">enca_set_threshold()</tt></a> for more detailed
threshold description.</p>

<div class="variablelist">
<table border="0">
<col align="left" valign="top"/>
<tbody>
<tr>
<td><span class="term"><i class="parameter"><tt>analyser</tt></i></span></td>
<td>An analyser.</td>
</tr>

<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span></span></td>
<td>The threshold value.</td>
</tr>
</tbody>
</table>
</div>

<p>Since 1.3.</p>
</div>
</div>
</div>

<table class="navigation" width="100%" summary="Navigation footer" cellpadding="2" cellspacing="0">
<tr valign="middle">
<td align="left"><a accesskey="p" href="http://trific.ath.cx/software/enca/libenca/ch01/"><b>&lt;&lt;&nbsp;Enca Library API</b></a></td>
<td align="right"><a accesskey="n" href="http://trific.ath.cx/software/enca/libenca/libenca-Typedefs-and-Constants/"><b>Typedefs and
Constants&nbsp;&gt;&gt;</b></a></td>
</tr>
</table>
<p><small>See also:
<a href="http://trific.ath.cx/software/enca/">Enca home page</a>
</small></p>
</body>
</html>
>
